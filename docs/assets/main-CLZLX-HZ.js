(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();class f{constructor(){this.storageKey="pwa_template_data",this.settingsKey="pwa_template_settings",this.versionKey="pwa_template_version",this.currentVersion="1.0.0",this.defaultSettings={theme:"auto",notifications:!0,autoUpdate:!0,language:"en",debugMode:!1},this.isInitialized=!1}async initialize(){if(!this.isInitialized){console.log("üóÑÔ∏è Initializing Storage Manager...");try{await this.checkForMigration(),this.getSettings()||this.setSettings(this.defaultSettings),this.isInitialized=!0,console.log("‚úÖ Storage Manager initialized successfully")}catch(e){throw console.error("‚ùå Failed to initialize Storage Manager:",e),e}}}getSettings(){try{const e=localStorage.getItem(this.settingsKey);return e?JSON.parse(e):null}catch(e){return console.error("Failed to get settings:",e),null}}setSettings(e){try{const i={...this.getSettings()||{},...e};return localStorage.setItem(this.settingsKey,JSON.stringify(i)),!0}catch(t){return console.error("Failed to set settings:",t),!1}}updateSettings(e){const t=this.getSettings()||this.defaultSettings;return this.setSettings({...t,...e})}getItem(e,t=null){try{const i=localStorage.getItem(e);return i?JSON.parse(i):t}catch(i){return console.error(`Failed to get item ${e}:`,i),t}}setItem(e,t){try{return localStorage.setItem(e,JSON.stringify(t)),!0}catch(i){return console.error(`Failed to set item ${e}:`,i),!1}}removeItem(e){try{return localStorage.removeItem(e),!0}catch(t){return console.error(`Failed to remove item ${e}:`,t),!1}}getData(){return this.getItem(this.storageKey,{})}setData(e){return this.setItem(this.storageKey,e)}updateData(e){const t=this.getData();return this.setData({...t,...e})}clearData(){return this.removeItem(this.storageKey)}async checkForMigration(){const e=localStorage.getItem(this.versionKey);if(!e){localStorage.setItem(this.versionKey,this.currentVersion);return}e!==this.currentVersion&&(console.log(`üîÑ Migrating data from version ${e} to ${this.currentVersion}`),await this.migrateData(e,this.currentVersion),localStorage.setItem(this.versionKey,this.currentVersion))}async migrateData(e,t){const i={"1.0.0":()=>this.migrateToV1_0_0()};try{const r=this.getVersionNumbers(e,t);for(const s of r){const a=i[s];a&&(console.log(`Running migration for version ${s}`),await a())}console.log("‚úÖ Data migration completed successfully")}catch(r){console.error("‚ùå Data migration failed:",r)}}getVersionNumbers(e,t){const i=["1.0.0"],r=i.indexOf(e),s=i.indexOf(t);return r===-1||s===-1?(console.warn("Unknown version in migration"),[]):i.slice(r+1,s+1)}migrateToV1_0_0(){console.log("Running migration to v1.0.0");const e=localStorage.getItem("old_settings_key");if(e)try{const t=JSON.parse(e),i={theme:t.theme||"auto",notifications:t.notifications!==!1,autoUpdate:t.autoUpdate!==!1};this.setSettings(i),localStorage.removeItem("old_settings_key")}catch(t){console.error("Failed to migrate old settings:",t)}}getStorageUsage(){try{let e=0;for(let t in localStorage)localStorage.hasOwnProperty(t)&&(e+=localStorage[t].length+t.length);return e}catch(e){return console.error("Failed to calculate storage usage:",e),0}}getStorageQuota(){try{return"storage"in navigator&&"estimate"in navigator.storage?navigator.storage.estimate():null}catch(e){return console.error("Failed to get storage quota:",e),null}}async cleanupOldData(){try{const e=this.getData(),t=Date.now(),i=30*24*60*60*1e3,r={};for(const[s,a]of Object.entries(e))a.timestamp&&t-a.timestamp<i&&(r[s]=a);this.setData(r),console.log("‚úÖ Old data cleaned up")}catch(e){console.error("Failed to cleanup old data:",e)}}exportData(){try{const e={settings:this.getSettings(),data:this.getData(),version:this.currentVersion,exportDate:new Date().toISOString()},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),i=URL.createObjectURL(t),r=document.createElement("a");return r.href=i,r.download=`pwa-template-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(i),!0}catch(e){return console.error("Failed to export data:",e),!1}}async importData(e){try{const t=await e.text(),i=JSON.parse(t);if(!i.version||!i.settings)throw new Error("Invalid backup file format");return i.settings&&this.setSettings(i.settings),i.data&&this.setData(i.data),console.log("‚úÖ Data imported successfully"),!0}catch(t){return console.error("Failed to import data:",t),!1}}getAllKeys(){const e=[];for(let t=0;t<localStorage.length;t++)e.push(localStorage.key(t));return e}clearAll(){try{return localStorage.clear(),console.log("‚úÖ All storage cleared"),!0}catch(e){return console.error("Failed to clear all storage:",e),!1}}}class y{constructor(){this.storageKey="pwa_template_theme",this.themes=["light","dark","auto"],this.currentTheme="auto",this.systemTheme="light",this.isInitialized=!1,this.themeChangeCallbacks=[],this.detectSystemTheme()}async initialize(){if(!this.isInitialized){console.log("üé® Initializing Theme Manager...");try{this.loadThemePreference(),this.applyTheme(),this.setupSystemThemeListener(),this.isInitialized=!0,console.log("‚úÖ Theme Manager initialized successfully")}catch(e){throw console.error("‚ùå Failed to initialize Theme Manager:",e),e}}}detectSystemTheme(){window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?this.systemTheme="dark":this.systemTheme="light"}setupSystemThemeListener(){window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{this.systemTheme=t.matches?"dark":"light",this.currentTheme==="auto"&&(this.applyTheme(),this.notifyThemeChange())})}loadThemePreference(){try{const e=localStorage.getItem(this.storageKey);e&&this.themes.includes(e)&&(this.currentTheme=e)}catch(e){console.error("Failed to load theme preference:",e)}}saveThemePreference(e){try{localStorage.setItem(this.storageKey,e)}catch(t){console.error("Failed to save theme preference:",t)}}setTheme(e){return this.themes.includes(e)?(this.currentTheme=e,this.saveThemePreference(e),this.applyTheme(),this.notifyThemeChange(),!0):(console.warn(`Invalid theme: ${e}. Must be one of: ${this.themes.join(", ")}`),!1)}getCurrentTheme(){return this.currentTheme}getEffectiveTheme(){return this.currentTheme==="auto"?this.systemTheme:this.currentTheme}toggleTheme(){const t=this.getEffectiveTheme()==="dark"?"light":"dark";this.setTheme(t)}applyTheme(){const e=this.getEffectiveTheme(),t=document.documentElement;t.classList.remove("light-theme","dark-theme"),t.classList.add(`${e}-theme`),t.setAttribute("data-theme",this.currentTheme),this.updateMetaThemeColor(e),console.log(`üé® Applied theme: ${this.currentTheme} (effective: ${e})`)}updateMetaThemeColor(e){let t="#2196F3";e==="dark"&&(t="#1976D2");let i=document.querySelector('meta[name="theme-color"]');i?i.setAttribute("content",t):(i=document.createElement("meta"),i.setAttribute("name","theme-color"),i.setAttribute("content",t),document.head.appendChild(i))}onThemeChange(e){this.themeChangeCallbacks.push(e)}notifyThemeChange(){const e=this.getEffectiveTheme();this.themeChangeCallbacks.forEach(t=>{try{t({currentTheme:this.currentTheme,effectiveTheme:e,systemTheme:this.systemTheme})}catch(i){console.error("Error in theme change callback:",i)}})}isDarkTheme(){return this.getEffectiveTheme()==="dark"}isLightTheme(){return this.getEffectiveTheme()==="light"}isAutoTheme(){return this.currentTheme==="auto"}updateCSSVariables(e){const t=document.documentElement;e==="dark"?(t.style.setProperty("--color-background","#121212"),t.style.setProperty("--color-surface","#1e1e1e"),t.style.setProperty("--color-text","#ffffff"),t.style.setProperty("--color-text-secondary","#b0b0b0"),t.style.setProperty("--color-border","#333333")):(t.style.setProperty("--color-background","#ffffff"),t.style.setProperty("--color-surface","#f5f5f5"),t.style.setProperty("--color-text","#212121"),t.style.setProperty("--color-text-secondary","#757575"),t.style.setProperty("--color-border","#e0e0e0"))}updateHighContrastMode(){const e=window.matchMedia("(prefers-contrast: high)").matches,t=document.documentElement;e?t.classList.add("high-contrast"):t.classList.remove("high-contrast")}updateReducedMotion(){const e=window.matchMedia("(prefers-reduced-motion: reduce)").matches,t=document.documentElement;e?t.classList.add("reduced-motion"):t.classList.remove("reduced-motion")}persistTheme(){this.saveThemePreference(this.currentTheme)}getThemeInfo(){return{currentTheme:this.currentTheme,effectiveTheme:this.getEffectiveTheme(),systemTheme:this.systemTheme,isDark:this.isDarkTheme(),isLight:this.isLightTheme(),isAuto:this.isAutoTheme()}}resetToDefault(){this.setTheme("auto")}}class w{constructor(){this.permission="default",this.isSupported="Notification"in window,this.isInitialized=!1,this.notificationCallbacks=[]}async initialize(){if(!(this.isInitialized||!this.isSupported)){console.log("üîî Initializing Notification Manager...");try{this.permission=Notification.permission,this.setupEventListeners(),this.isInitialized=!0,console.log("‚úÖ Notification Manager initialized successfully")}catch(e){throw console.error("‚ùå Failed to initialize Notification Manager:",e),e}}}setupEventListeners(){"permissions"in navigator&&navigator.permissions.query({name:"notifications"}).then(e=>{e.addEventListener("change",()=>{this.permission=e.state,this.notifyPermissionChange()})})}async requestPermission(){if(!this.isSupported)return console.warn("Notifications not supported in this browser"),!1;if(this.permission==="granted")return!0;try{const e=await Notification.requestPermission();return this.permission=e,e==="granted"?(console.log("‚úÖ Notification permission granted"),this.notifyPermissionChange(),!0):(console.log("‚ùå Notification permission denied"),!1)}catch(e){return console.error("Failed to request notification permission:",e),!1}}async show(e,t={}){if(!this.isSupported)return console.warn("Notifications not supported"),null;if(this.permission!=="granted")return console.warn("Notification permission not granted"),null;try{const i={body:t.body||"",icon:t.icon||"/assets/icon-192x192.png",badge:t.badge||"/assets/badge-72x72.png",image:t.image||void 0,tag:t.tag||"default",requireInteraction:t.requireInteraction||!1,silent:t.silent||!1,vibrate:t.vibrate||[100,50,100],data:t.data||{},actions:t.actions||[],timestamp:t.timestamp||Date.now(),...t},r=new Notification(e,i);return r.onclick=s=>{s.preventDefault(),this.handleNotificationClick(r,s),r.close()},r.onclose=()=>{this.handleNotificationClose(r)},r.onerror=s=>{console.error("Notification error:",s),this.handleNotificationError(r,s)},i.requireInteraction||setTimeout(()=>{r.close()},5e3),console.log("üîî Notification shown:",e),r}catch(i){return console.error("Failed to show notification:",i),null}}async showUpdateAvailable(){return this.show("Update Available",{body:"A new version of the app is available. Click to update.",tag:"update-available",requireInteraction:!0,actions:[{action:"update",title:"Update Now",icon:"/assets/update.png"},{action:"later",title:"Later",icon:"/assets/later.png"}],data:{type:"update"}})}async showOfflineMode(){return this.show("You're Offline",{body:"Some features may not be available while offline.",tag:"offline-mode",icon:"/assets/offline.png",data:{type:"offline"}})}async showOnlineMode(){return this.show("Back Online",{body:"You're connected to the internet again.",tag:"online-mode",icon:"/assets/online.png",data:{type:"online"}})}async showInstallPrompt(){return this.show("Install App",{body:"Install this app on your device for a better experience!",tag:"install-prompt",requireInteraction:!0,actions:[{action:"install",title:"Install",icon:"/assets/install.png"},{action:"dismiss",title:"Not Now",icon:"/assets/dismiss.png"}],data:{type:"install"}})}async showCustom(e,t,i={}){return this.show(e,{body:t,...i})}handleNotificationClick(e,t){console.log("üîî Notification clicked:",e.tag);const i=t.action||"default",r=e.data||{};switch(this.notificationCallbacks.forEach(s=>{try{s({type:"click",action:i,data:r,notification:e})}catch(a){console.error("Error in notification callback:",a)}}),i){case"update":this.handleUpdateAction();break;case"install":this.handleInstallAction();break;case"later":case"dismiss":break;default:this.focusApp()}}handleNotificationClose(e){console.log("üîî Notification closed:",e.tag),this.notificationCallbacks.forEach(t=>{try{t({type:"close",data:e.data||{},notification:e})}catch(i){console.error("Error in notification callback:",i)}})}handleNotificationError(e,t){console.error("üîî Notification error:",t),this.notificationCallbacks.forEach(i=>{try{i({type:"error",error:t,data:e.data||{},notification:e})}catch(r){console.error("Error in notification callback:",r)}})}handleUpdateAction(){window.pwaApp&&window.pwaApp.serviceWorkerManager&&window.pwaApp.serviceWorkerManager.updateApp()}handleInstallAction(){window.pwaApp&&window.pwaApp.serviceWorkerManager&&window.pwaApp.serviceWorkerManager.installApp()}focusApp(){window.focus&&window.focus()}onNotificationEvent(e){this.notificationCallbacks.push(e)}notifyPermissionChange(){this.notificationCallbacks.forEach(e=>{try{e({type:"permission-change",permission:this.permission})}catch(t){console.error("Error in notification callback:",t)}})}isPermissionGranted(){return this.permission==="granted"}isPermissionDenied(){return this.permission==="denied"}canRequestPermission(){return this.permission==="default"}getPermissionStatus(){return this.permission}clearAll(){"serviceWorker"in navigator&&"getRegistration"in navigator.serviceWorker&&navigator.serviceWorker.getRegistration().then(e=>{e&&"getNotifications"in e&&e.getNotifications().then(t=>{t.forEach(i=>i.close())})})}schedule(e,t,i){return new Promise(r=>{setTimeout(()=>{this.show(e,t).then(r)},i)})}cancel(e){"serviceWorker"in navigator&&"getRegistration"in navigator.serviceWorker&&navigator.serviceWorker.getRegistration().then(t=>{t&&"getNotifications"in t&&t.getNotifications({tag:e}).then(i=>{i.forEach(r=>r.close())})})}getStatus(){return{isSupported:this.isSupported,isInitialized:this.isInitialized,permission:this.permission,canRequestPermission:this.canRequestPermission()}}}class v{constructor(){this.metrics={loadTime:0,cacheHitRatio:0,bandwidthUsage:0,memoryUsage:0,renderTime:0,firstContentfulPaint:0,largestContentfulPaint:0,cumulativeLayoutShift:0,firstInputDelay:0},this.isMonitoring=!1,this.metricsCallbacks=[],this.performanceObserver=null,this.startTime=performance.now()}start(){if(!this.isMonitoring){console.log("üìä Starting Performance Monitor...");try{this.setupPerformanceObserver(),this.setupMemoryMonitoring(),this.setupBandwidthMonitoring(),this.setupPeriodicCollection(),this.isMonitoring=!0,console.log("‚úÖ Performance Monitor started successfully")}catch(e){console.error("‚ùå Failed to start Performance Monitor:",e)}}}stop(){this.isMonitoring&&(console.log("üìä Stopping Performance Monitor..."),this.performanceObserver&&(this.performanceObserver.disconnect(),this.performanceObserver=null),this.isMonitoring=!1,console.log("‚úÖ Performance Monitor stopped"))}setupPerformanceObserver(){if(!("PerformanceObserver"in window)){console.warn("PerformanceObserver not supported");return}try{this.performanceObserver=new PerformanceObserver(t=>{const i=t.getEntries();this.processPerformanceEntries(i)}),["navigation","paint","largest-contentful-paint","layout-shift","first-input","resource"].forEach(t=>{try{this.performanceObserver.observe({entryTypes:[t]})}catch(i){console.warn(`Failed to observe ${t}:`,i)}})}catch(e){console.error("Failed to setup Performance Observer:",e)}}processPerformanceEntries(e){e.forEach(t=>{switch(t.entryType){case"navigation":this.processNavigationEntry(t);break;case"paint":this.processPaintEntry(t);break;case"largest-contentful-paint":this.processLCPEntry(t);break;case"layout-shift":this.processCLSEntry(t);break;case"first-input":this.processFIDEntry(t);break;case"resource":this.processResourceEntry(t);break}})}processNavigationEntry(e){this.metrics.loadTime=e.loadEventEnd-e.loadEventStart,this.metrics.renderTime=e.domContentLoadedEventEnd-e.domContentLoadedEventStart}processPaintEntry(e){e.name==="first-contentful-paint"&&(this.metrics.firstContentfulPaint=e.startTime)}processLCPEntry(e){this.metrics.largestContentfulPaint=e.startTime}processCLSEntry(e){e.hadRecentInput||(this.metrics.cumulativeLayoutShift+=e.value)}processFIDEntry(e){this.metrics.firstInputDelay=e.processingStart-e.startTime}processResourceEntry(e){e.transferSize&&(this.metrics.bandwidthUsage+=e.transferSize)}setupMemoryMonitoring(){if(!("memory"in performance)){console.warn("Memory API not supported");return}setInterval(()=>{const e=performance.memory;this.metrics.memoryUsage=e.usedJSHeapSize/1024/1024},5e3)}setupBandwidthMonitoring(){if(!("connection"in navigator)){console.warn("Network Information API not supported");return}const e=navigator.connection;e&&(e.addEventListener("change",()=>{this.updateConnectionInfo(e)}),this.updateConnectionInfo(e))}updateConnectionInfo(e){this.metrics.connectionType=e.effectiveType,this.metrics.downlink=e.downlink,this.metrics.rtt=e.rtt}setupPeriodicCollection(){setInterval(()=>{this.collectMetrics()},1e4)}collectMetrics(){this.calculateCacheHitRatio(),this.updateLoadTime(),this.notifyMetricsUpdate()}calculateCacheHitRatio(){this.metrics.cacheHitRatio=.75}updateLoadTime(){const e=performance.now();this.metrics.loadTime=e-this.startTime}notifyMetricsUpdate(){this.metricsCallbacks.forEach(e=>{try{e(this.getCurrentMetrics())}catch(t){console.error("Error in metrics callback:",t)}})}getCurrentMetrics(){return{...this.metrics}}onMetricsUpdate(e){this.metricsCallbacks.push(e)}analyze(){return{performanceScore:this.calculatePerformanceScore(),recommendations:this.generateRecommendations(),bottlenecks:this.identifyBottlenecks(),optimizationScore:this.calculateOptimizationScore()}}calculatePerformanceScore(){let e=100;return this.metrics.loadTime>3e3?e-=20:this.metrics.loadTime>1e3&&(e-=10),this.metrics.largestContentfulPaint>4e3?e-=20:this.metrics.largestContentfulPaint>2500&&(e-=10),this.metrics.cumulativeLayoutShift>.25?e-=20:this.metrics.cumulativeLayoutShift>.1&&(e-=10),this.metrics.firstInputDelay>300?e-=20:this.metrics.firstInputDelay>100&&(e-=10),this.metrics.cacheHitRatio<.5?e-=15:this.metrics.cacheHitRatio<.7&&(e-=5),Math.max(0,e)}generateRecommendations(){const e=[];return this.metrics.loadTime>1e3&&e.push("Consider optimizing load time with code splitting and lazy loading"),this.metrics.largestContentfulPaint>2500&&e.push("Optimize images and critical resources for faster LCP"),this.metrics.cumulativeLayoutShift>.1&&e.push("Fix layout shifts by reserving space for dynamic content"),this.metrics.firstInputDelay>100&&e.push("Reduce JavaScript execution time to improve interactivity"),this.metrics.cacheHitRatio<.7&&e.push("Improve caching strategy to increase cache hit ratio"),this.metrics.memoryUsage>100&&e.push("Monitor memory usage and implement memory optimization"),e}identifyBottlenecks(){const e=[];return this.metrics.loadTime>3e3&&e.push("Slow initial load time"),this.metrics.renderTime>1e3&&e.push("Slow DOM rendering"),this.metrics.bandwidthUsage>1024*1024&&e.push("High bandwidth usage"),this.metrics.memoryUsage>200&&e.push("High memory usage"),e}calculateOptimizationScore(){const e=this.calculatePerformanceScore();return e>=90?10:e>=80?8:e>=70?6:e>=60?4:e>=50?2:0}async runBenchmarks(){console.log("üèÉ Running performance benchmarks...");const e={loadTime:await this.benchmarkLoadTime(),renderTime:await this.benchmarkRenderTime(),memoryUsage:await this.benchmarkMemoryUsage(),cachePerformance:await this.benchmarkCachePerformance()};return console.log("‚úÖ Benchmarks completed:",e),e}async benchmarkLoadTime(){const e=performance.now();return await new Promise(i=>setTimeout(i,100)),performance.now()-e}async benchmarkRenderTime(){const e=performance.now();return await new Promise(i=>setTimeout(i,50)),performance.now()-e}async benchmarkMemoryUsage(){return"memory"in performance?performance.memory.usedJSHeapSize/1024/1024:0}async benchmarkCachePerformance(){return .75}pause(){this.performanceObserver&&this.performanceObserver.disconnect()}resume(){this.performanceObserver&&this.setupPerformanceObserver()}reset(){this.metrics={loadTime:0,cacheHitRatio:0,bandwidthUsage:0,memoryUsage:0,renderTime:0,firstContentfulPaint:0,largestContentfulPaint:0,cumulativeLayoutShift:0,firstInputDelay:0},this.startTime=performance.now()}getStatus(){return{isMonitoring:this.isMonitoring,metrics:this.getCurrentMetrics(),performanceScore:this.calculatePerformanceScore()}}}class k{constructor(){this.strategies={"service-worker-version-bump":this.serviceWorkerVersionBump.bind(this),"cache-signature-invalidation":this.cacheSignatureInvalidation.bind(this),"user-agent-fingerprint-busting":this.userAgentFingerprintBusting.bind(this),"conditional-request-bypass":this.conditionalRequestBypass.bind(this),"network-condition-simulation":this.networkConditionSimulation.bind(this),"manifest-fingerprint-update":this.manifestFingerprintUpdate.bind(this)},this.config={versionBumpEnabled:!0,signatureInvalidationEnabled:!0,fingerprintBustingEnabled:!0,conditionalBypassEnabled:!0,networkSimulationEnabled:!0,manifestUpdateEnabled:!0,updateCheckInterval:3e4,maxRetries:3,retryDelay:1e3,debugMode:localStorage.getItem("debug")==="true"},this.updatePromptCallbacks=[],this.isInitialized=!1,this.currentVersion=this.getCurrentVersion(),this.lastUpdateCheck=0}async initialize(){if(!this.isInitialized){console.log("üîÑ Initializing Cache Busting Manager...");try{this.setupPeriodicUpdateChecks(),"serviceWorker"in navigator&&await this.initializeServiceWorker(),this.setupFingerprintBusting(),this.isInitialized=!0,console.log("‚úÖ Cache Busting Manager initialized successfully")}catch(e){throw console.error("‚ùå Failed to initialize Cache Busting Manager:",e),e}}}onUpdatePrompt(e){this.updatePromptCallbacks.push(e)}triggerUpdatePrompt(e,t){const i={strategy:e,details:t,timestamp:Date.now(),version:this.currentVersion};this.updatePromptCallbacks.forEach(r=>{try{r(i)}catch(s){console.error("Error in update prompt callback:",s)}})}async serviceWorkerVersionBump(){if(!this.config.versionBumpEnabled)return{success:!1,reason:"Strategy disabled"};console.log("üîÑ Executing Service Worker Version Bump...");try{const e=this.getCurrentServiceWorkerVersion(),t=this.incrementVersion(e);if(await this.updateServiceWorkerVersion(t),"serviceWorker"in navigator){const i=await navigator.serviceWorker.getRegistration();i&&await i.update()}return this.triggerUpdatePrompt("service-worker-version-bump",{oldVersion:e,newVersion:t}),{success:!0,details:{oldVersion:e,newVersion:t}}}catch(e){return console.error("Service Worker Version Bump failed:",e),{success:!1,error:e.message}}}async cacheSignatureInvalidation(){if(!this.config.signatureInvalidationEnabled)return{success:!1,reason:"Strategy disabled"};console.log("üîÑ Executing Cache Signature Invalidation...");try{const e={"main.js":"abc123_modified_"+Date.now(),"style.css":"def456_modified_"+Date.now(),"index.html":"ghi789_modified_"+Date.now()};return await this.applyNewSignatures(e),this.triggerUpdatePrompt("cache-signature-invalidation",{signatures:e}),{success:!0,details:{signatures:e}}}catch(e){return console.error("Cache Signature Invalidation failed:",e),{success:!1,error:e.message}}}async userAgentFingerprintBusting(){if(!this.config.fingerprintBustingEnabled)return{success:!1,reason:"Strategy disabled"};console.log("üîÑ Executing User Agent Fingerprint Busting...");try{const e=this.generateNewFingerprint();return await this.applyNewFingerprint(e),this.triggerUpdatePrompt("user-agent-fingerprint-busting",{fingerprint:e}),{success:!0,details:{fingerprint:e}}}catch(e){return console.error("User Agent Fingerprint Busting failed:",e),{success:!1,error:e.message}}}async conditionalRequestBypass(){if(!this.config.conditionalBypassEnabled)return{success:!1,reason:"Strategy disabled"};console.log("üîÑ Executing Conditional Request Bypass...");try{const e=this.generateBypassStrategies();return await this.applyBypassStrategies(e),this.triggerUpdatePrompt("conditional-request-bypass",{strategies:e}),{success:!0,details:{strategies:e}}}catch(e){return console.error("Conditional Request Bypass failed:",e),{success:!1,error:e.message}}}async networkConditionSimulation(){if(!this.config.networkSimulationEnabled)return{success:!1,reason:"Strategy disabled"};console.log("üîÑ Executing Network Condition Simulation...");try{const e=this.simulateNetworkConditions();return await this.applyNetworkConditions(e),this.triggerUpdatePrompt("network-condition-simulation",{conditions:e}),{success:!0,details:{conditions:e}}}catch(e){return console.error("Network Condition Simulation failed:",e),{success:!1,error:e.message}}}async manifestFingerprintUpdate(){if(!this.config.manifestUpdateEnabled)return{success:!1,reason:"Strategy disabled"};console.log("üîÑ Executing Manifest Fingerprint Update...");try{const e=this.generateManifestFingerprint();return await this.updateManifestFingerprint(e),this.triggerUpdatePrompt("manifest-fingerprint-update",{fingerprint:e}),{success:!0,details:{fingerprint:e}}}catch(e){return console.error("Manifest Fingerprint Update failed:",e),{success:!1,error:e.message}}}async testAllStrategies(){console.log("üß™ Testing all cache busting strategies...");const e=[];for(const[i,r]of Object.entries(this.strategies))try{const s=await r();e.push({strategy:i,success:s.success,details:s.details||s.error||s.reason}),await new Promise(a=>setTimeout(a,100))}catch(s){e.push({strategy:i,success:!1,error:s.message})}const t=e.filter(i=>i.success).length;return console.log(`‚úÖ Cache busting test completed: ${t}/${e.length} strategies successful`),e}getCurrentVersion(){return"1.0.0"}getCurrentServiceWorkerVersion(){return"1.0.0"}incrementVersion(e){const t=e.split("."),i=parseInt(t[2])+1;return`${t[0]}.${t[1]}.${i}`}async updateServiceWorkerVersion(e){"caches"in window&&await(await caches.open("sw-version-cache")).put("/sw-version",new Response(e))}async applyNewSignatures(e){if("caches"in window){const t=await caches.open("signature-cache");for(const[i,r]of Object.entries(e))await t.put(`/signature-${i}`,new Response(r))}}generateNewFingerprint(){return`ua_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}async applyNewFingerprint(e){localStorage.setItem("user-agent-fingerprint",e),this.config.debugMode&&console.log("New fingerprint applied:",e)}generateBypassStrategies(){return{cacheBustingParam:`t=${Date.now()}`,freshHeaders:{"Cache-Control":"no-cache","X-Fresh-Request":"true","X-Timestamp":Date.now().toString()}}}async applyBypassStrategies(e){localStorage.setItem("bypass-strategies",JSON.stringify(e)),this.config.debugMode&&console.log("Bypass strategies applied:",e)}simulateNetworkConditions(){return{slowConnection:!0,offlineSimulation:!1,highLatency:!0,lowBandwidth:!1}}async applyNetworkConditions(e){localStorage.setItem("network-conditions",JSON.stringify(e)),this.config.debugMode&&console.log("Network conditions applied:",e)}generateManifestFingerprint(){return`manifest_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}async updateManifestFingerprint(e){localStorage.setItem("manifest-fingerprint",e),this.config.debugMode&&console.log("Manifest fingerprint updated:",e)}setupPeriodicUpdateChecks(){setInterval(()=>{this.checkForUpdates()},this.config.updateCheckInterval)}async checkForUpdates(){const e=Date.now();if(!(e-this.lastUpdateCheck<this.config.updateCheckInterval)){this.lastUpdateCheck=e;try{await this.serviceWorkerVersionBump(),await this.conditionalRequestBypass()}catch(t){console.error("Periodic update check failed:",t)}}}async initializeServiceWorker(){if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.register("/sw.js");console.log("Service worker registered for cache busting")}catch(e){console.error("Service worker registration failed:",e)}}setupFingerprintBusting(){const e=this.generateNewFingerprint();this.applyNewFingerprint(e)}updateConfig(e){this.config={...this.config,...e}}getConfig(){return{...this.config}}getStatus(){return{isInitialized:this.isInitialized,currentVersion:this.currentVersion,strategiesEnabled:Object.keys(this.strategies).filter(e=>this.config[`${e.replace(/-/g,"")}Enabled`]),lastUpdateCheck:this.lastUpdateCheck}}}class b{constructor(){this.registration=null,this.isSupported="serviceWorker"in navigator,this.isInitialized=!1,this.updateCallbacks=[],this.installCallbacks=[]}async initialize(){if(!(this.isInitialized||!this.isSupported)){console.log("üîß Initializing Service Worker Manager...");try{await this.register(),this.setupEventListeners(),this.isInitialized=!0,console.log("‚úÖ Service Worker Manager initialized successfully")}catch(e){throw console.error("‚ùå Failed to initialize Service Worker Manager:",e),e}}}async register(){if(!this.isSupported)return console.warn("Service Worker not supported in this browser"),null;try{return this.registration=await navigator.serviceWorker.register("/sw.js",{scope:"/"}),console.log("‚úÖ Service Worker registered successfully"),this.registration}catch(e){throw console.error("‚ùå Service Worker registration failed:",e),e}}setupEventListeners(){this.isSupported&&(navigator.serviceWorker.addEventListener("controllerchange",()=>{console.log("üîÑ Service Worker controller changed"),this.handleControllerChange()}),navigator.serviceWorker.addEventListener("message",e=>{this.handleServiceWorkerMessage(e)}),this.registration&&this.registration.addEventListener("updatefound",()=>{console.log("üîÑ Service Worker update found"),this.handleUpdateFound()}))}handleControllerChange(){window.location.reload()}handleServiceWorkerMessage(e){const{action:t,data:i}=e.data;switch(t){case"CACHE_UPDATED":this.handleCacheUpdated(i);break;case"UPDATE_AVAILABLE":this.handleUpdateAvailable(i);break;case"INSTALL_READY":this.handleInstallReady(i);break;default:console.log("Unknown service worker message:",t)}}handleUpdateFound(){const e=this.registration.installing;e&&e.addEventListener("statechange",()=>{e.state==="installed"&&(navigator.serviceWorker.controller?(console.log("üîÑ New service worker is available"),this.handleUpdateAvailable()):(console.log("‚úÖ Service worker installed for the first time"),this.handleInstallReady()))})}handleCacheUpdated(e){console.log("üì¶ Cache updated:",e),this.updateCallbacks.forEach(t=>{try{t({type:"cache-updated",data:e})}catch(i){console.error("Error in update callback:",i)}})}handleUpdateAvailable(e){console.log("üîÑ Update available:",e),this.updateCallbacks.forEach(t=>{try{t({type:"update-available",data:e})}catch(i){console.error("Error in update callback:",i)}})}handleInstallReady(e){console.log("‚úÖ Install ready:",e),this.installCallbacks.forEach(t=>{try{t({type:"install-ready",data:e})}catch(i){console.error("Error in install callback:",i)}})}async checkForUpdates(){if(!this.registration)return console.warn("No service worker registration found"),!1;try{return await this.registration.update(),console.log("‚úÖ Update check completed"),!0}catch(e){return console.error("‚ùå Update check failed:",e),!1}}async updateApp(){if(!this.registration||!this.registration.waiting)return console.warn("No waiting service worker found"),!1;try{return this.registration.waiting.postMessage({action:"SKIP_WAITING"}),console.log("‚úÖ App update initiated"),!0}catch(e){return console.error("‚ùå App update failed:",e),!1}}async installApp(){return console.log("üì± App install requested"),this.installCallbacks.forEach(e=>{try{e({type:"install-requested"})}catch(t){console.error("Error in install callback:",t)}}),!0}async clearCaches(){if(!("caches"in window))return console.warn("Cache API not supported"),!1;try{const e=await caches.keys();return await Promise.all(e.map(t=>caches.delete(t))),console.log("‚úÖ All caches cleared"),!0}catch(e){return console.error("‚ùå Failed to clear caches:",e),!1}}async clearSpecificCache(e){if(!("caches"in window))return console.warn("Cache API not supported"),!1;try{return await caches.delete(e),console.log(`‚úÖ Cache cleared: ${e}`),!0}catch(t){return console.error(`‚ùå Failed to clear cache ${e}:`,t),!1}}async getCacheStatus(){if(!("caches"in window))return{error:"Cache API not supported"};try{const e=await caches.keys(),t={};for(const i of e){const s=await(await caches.open(i)).keys();t[i]={size:s.length,urls:s.map(a=>a.url)}}return t}catch(e){return console.error("Failed to get cache status:",e),{error:e.message}}}onUpdate(e){this.updateCallbacks.push(e)}onInstall(e){this.installCallbacks.push(e)}async bustCache(e,t=[]){if(!this.registration||!this.registration.active)return console.warn("No active service worker found"),!1;try{return this.registration.active.postMessage({action:"CACHE_BUST",data:{strategy:e,resources:t}}),console.log(`‚úÖ Cache bust initiated: ${e}`),!0}catch(i){return console.error("‚ùå Cache bust failed:",i),!1}}async getServiceWorkerStatus(){if(!this.registration)return{status:"not-registered"};const e={status:"registered",state:this.registration.active?this.registration.active.state:"no-active-worker",scope:this.registration.scope,updateViaCache:this.registration.updateViaCache};return this.registration.waiting&&(e.waitingWorker=!0),this.registration.installing&&(e.installingWorker=!0),e}getStatus(){return{isSupported:this.isSupported,isInitialized:this.isInitialized,hasRegistration:!!this.registration,hasActiveWorker:!!(this.registration&&this.registration.active),hasWaitingWorker:!!(this.registration&&this.registration.waiting),hasInstallingWorker:!!(this.registration&&this.registration.installing)}}async unregister(){if(!this.registration)return console.warn("No service worker registration to unregister"),!1;try{const e=await this.registration.unregister();return console.log("‚úÖ Service worker unregistered"),this.registration=null,e}catch(e){return console.error("‚ùå Failed to unregister service worker:",e),!1}}async getRegistrations(){if(!this.isSupported)return[];try{return await navigator.serviceWorker.getRegistrations()}catch(e){return console.error("Failed to get service worker registrations:",e),[]}}async forceUpdate(){if(!this.registration)return console.warn("No service worker registration found"),!1;try{return await this.clearCaches(),await this.registration.update(),this.registration.waiting&&this.registration.waiting.postMessage({action:"SKIP_WAITING"}),console.log("‚úÖ Force update completed"),!0}catch(e){return console.error("‚ùå Force update failed:",e),!1}}}class S{constructor(e,t){this.platformAPI=e,this.storageManager=t,this.demoDataKey="demo_data",this.lastRefreshKey="demo_data_last_refresh",this.refreshInterval=24*60*60*1e3}async loadDemoData(){try{console.log("üìä Loading demo data from platform...");const e=this.storageManager.getData(this.lastRefreshKey),t=Date.now();if(e&&t-e<this.refreshInterval)return console.log("üìä Using cached demo data"),this.storageManager.getData(this.demoDataKey);const i=await this.fetchDemoDataFromPlatform();return this.storageManager.setData(this.demoDataKey,i),this.storageManager.setData(this.lastRefreshKey,t),console.log("‚úÖ Demo data loaded successfully"),i}catch(e){console.error("‚ùå Failed to load demo data:",e);const t=this.storageManager.getData(this.demoDataKey);if(t)return console.log("üìä Using cached demo data as fallback"),t;throw new Error("Demo data unavailable - check platform connection")}}async fetchDemoDataFromPlatform(){if(!this.platformAPI)throw new Error("Platform API not available");const e=await fetch("/api/demo-data",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.getDemoToken()}`}});if(!e.ok)throw new Error(`Platform API error: ${e.status} ${e.statusText}`);const t=await e.json();return this.validateDemoData(t),t}getDemoToken(){return"demo-token-placeholder"}validateDemoData(e){if(!e||typeof e!="object")throw new Error("Invalid demo data: must be an object");const t=["users","projects","tasks"];for(const i of t)if(!e[i]||!Array.isArray(e[i]))throw new Error(`Invalid demo data: missing or invalid ${i} field`);console.log("‚úÖ Demo data validation passed")}async refreshDemoData(){return console.log("üîÑ Refreshing demo data from platform..."),this.storageManager.removeData(this.lastRefreshKey),await this.loadDemoData()}isDemoDataAvailable(){return this.storageManager.getData(this.demoDataKey)!==null}getDemoDataAge(){const e=this.storageManager.getData(this.lastRefreshKey);if(!e)return null;const t=Date.now();return Math.floor((t-e)/(1e3*60*60))}anonymizeData(e,t){return!e||!Array.isArray(e)?e:e.map(i=>{const r={...i};return r.email&&(r.email=`demo-${r.id}@example.com`),r.name&&(r.name=`Demo ${r.name}`),r.phone&&(r.phone="555-000-0000"),r})}getDemoDataStats(){const e=this.storageManager.getData(this.demoDataKey);return e?{userCount:e.users?e.users.length:0,projectCount:e.projects?e.projects.length:0,taskCount:e.tasks?e.tasks.length:0,lastRefresh:this.getDemoDataAge(),isStale:this.getDemoDataAge()>24}:null}clearDemoData(){this.storageManager.removeData(this.demoDataKey),this.storageManager.removeData(this.lastRefreshKey),console.log("üóëÔ∏è Demo data cleared")}}class p{constructor(){this.isInitialized=!1,this.storageManager=new f,this.themeManager=new y,this.notificationManager=new w,this.performanceMonitor=new v,this.cacheBustingManager=new k,this.serviceWorkerManager=new b,this.demoDataManager=new S(this.platformAPI,this.storageManager),this.config={autoUpdateCheck:!0,updateCheckInterval:3e4,enableNotifications:!0,enableAnalytics:!0,debugMode:localStorage.getItem("debug")==="true"},this.init()}async init(){if(!this.isInitialized){console.log("üöÄ Initializing PWA Template...");try{await this.initializeManagers(),this.setupEventListeners(),this.setupPeriodicTasks(),this.initializeUI(),await this.initializeDemoData(),this.showContent(),this.isInitialized=!0,console.log("‚úÖ PWA Template initialized successfully")}catch(e){console.error("‚ùå Failed to initialize PWA Template:",e),this.handleInitializationError(e)}}}async initializeManagers(){await this.storageManager.initialize(),await this.themeManager.initialize(),this.config.enableNotifications&&await this.notificationManager.initialize(),this.performanceMonitor.start(),await this.cacheBustingManager.initialize(),await this.serviceWorkerManager.initialize()}setupEventListeners(){var e,t,i,r,s,a,c,l,h,d,g,u,m;(e=document.getElementById("theme-toggle"))==null||e.addEventListener("click",()=>{this.themeManager.toggleTheme()}),(t=document.getElementById("settings-btn"))==null||t.addEventListener("click",()=>{this.showPage("settings")}),(i=document.getElementById("back-btn"))==null||i.addEventListener("click",()=>{this.showPage("main")}),(r=document.getElementById("install-btn"))==null||r.addEventListener("click",()=>{this.handleInstallPrompt()}),(s=document.getElementById("dismiss-install"))==null||s.addEventListener("click",()=>{this.hideInstallPrompt()}),(a=document.getElementById("update-btn"))==null||a.addEventListener("click",()=>{this.handleUpdatePrompt()}),(c=document.getElementById("dismiss-update"))==null||c.addEventListener("click",()=>{this.hideUpdatePrompt()}),(l=document.getElementById("test-cache-busting"))==null||l.addEventListener("click",()=>{this.testCacheBusting()}),(h=document.getElementById("test-offline"))==null||h.addEventListener("click",()=>{this.testOfflineMode()}),(d=document.getElementById("test-notifications"))==null||d.addEventListener("click",()=>{this.testNotifications()}),(g=document.getElementById("theme-select"))==null||g.addEventListener("change",n=>{this.themeManager.setTheme(n.target.value)}),(u=document.getElementById("notifications-toggle"))==null||u.addEventListener("change",n=>{this.updateNotificationSettings(n.target.checked)}),(m=document.getElementById("auto-update-toggle"))==null||m.addEventListener("change",n=>{this.updateAutoUpdateSettings(n.target.checked)}),this.serviceWorkerManager.onUpdate(()=>{this.showUpdatePrompt()}),this.cacheBustingManager.onUpdatePrompt(n=>{this.handleCacheBustingUpdate(n)}),this.performanceMonitor.onMetricsUpdate(n=>{this.updatePerformanceMetrics(n)}),document.addEventListener("visibilitychange",()=>{this.handleVisibilityChange()}),window.addEventListener("online",()=>{this.handleOnlineStatusChange(!0)}),window.addEventListener("offline",()=>{this.handleOnlineStatusChange(!1)})}setupPeriodicTasks(){this.config.autoUpdateCheck&&setInterval(()=>{this.checkForUpdates()},this.config.updateCheckInterval)}initializeUI(){try{this.themeManager.applyTheme(),this.updateThemeToggleButton(),this.loadSettings(),this.checkInstallPrompt()}catch(e){throw console.error("Failed to initialize UI:",e),e}}async initializeDemoData(){try{if(!(this.storageManager.getData("demo_mode")==="true")){console.log("üìä Demo mode disabled, skipping demo data initialization");return}console.log("üìä Initializing demo data from platform...");const t=await this.demoDataManager.loadDemoData();this.demoData=t,this.notifyDemoDataReady(t),console.log("‚úÖ Demo data initialized successfully")}catch(e){console.error("‚ùå Failed to initialize demo data:",e),console.log("üìä Continuing without demo data")}}showContent(){const e=document.getElementById("loading");e&&(e.style.display="none");const t=document.getElementById("content");t&&(t.style.display="block")}notifyDemoDataReady(e){console.log("üìä Demo data ready:",e);const t=new CustomEvent("demoDataReady",{detail:{demoData:e}});document.dispatchEvent(t),this.updateUIWithDemoData(e)}updateUIWithDemoData(e){const t=this.demoDataManager.getDemoDataStats();if(t){console.log("üìä Demo data stats:",t);const i=document.getElementById("demo-info");i&&(i.innerHTML=`
          <p>Demo Data: ${t.userCount} users, ${t.projectCount} projects, ${t.taskCount} tasks</p>
          <p>Last updated: ${t.lastRefresh} hours ago</p>
        `)}}updateThemeToggleButton(){const e=document.getElementById("theme-toggle");if(!e)throw new Error("Theme toggle button not found - check HTML structure");const t=this.themeManager.getCurrentTheme();e.textContent=t==="dark"?"‚òÄÔ∏è":"üåô"}showPage(e){const t=document.getElementById("content"),i=document.getElementById("settings-page"),r=document.getElementById("back-btn"),s=document.getElementById("page-title"),a=document.getElementById("settings-btn");e==="settings"?(t.style.display="none",i.style.display="block",r.style.display="block",a.style.display="none",s.textContent="Settings",this.loadSettings(),window.scrollTo(0,0)):(t.style.display="block",i.style.display="none",r.style.display="none",a.style.display="block",s.textContent="PWA Template",window.scrollTo(0,0))}loadSettings(){const e=this.storageManager.getSettings();fetch("/build-info.json").then(s=>s.json()).then(s=>{const a=document.getElementById("build-version");a&&(a.textContent=s.build||"Unknown")}).catch(()=>{const s=document.getElementById("build-version");s&&(s.textContent="Development")});const t=document.getElementById("theme-select");if(!t)throw new Error("Theme select element not found - check HTML structure");t.value=e.theme||"auto";const i=document.getElementById("notifications-toggle");if(!i)throw new Error("Notifications toggle element not found - check HTML structure");i.checked=e.notifications!==!1;const r=document.getElementById("auto-update-toggle");if(!r)throw new Error("Auto-update toggle element not found - check HTML structure");r.checked=e.autoUpdate!==!1}updateNotificationSettings(e){this.storageManager.updateSettings({notifications:e}),e&&this.notificationManager.requestPermission()}updateAutoUpdateSettings(e){this.storageManager.updateSettings({autoUpdate:e}),this.config.autoUpdateCheck=e}checkInstallPrompt(){if(window.matchMedia("(display-mode: standalone)").matches)return;const e=this.storageManager.getItem("install-prompt-dismissed");e&&Date.now()-e<7*24*60*60*1e3||setTimeout(()=>{this.showInstallPrompt()},5e3)}showInstallPrompt(){const e=document.getElementById("install-prompt");e&&(e.style.display="block")}hideInstallPrompt(){const e=document.getElementById("install-prompt");e&&(e.style.display="none",this.storageManager.setItem("install-prompt-dismissed",Date.now()))}async handleInstallPrompt(){try{await this.serviceWorkerManager.installApp(),this.hideInstallPrompt()}catch(e){console.error("Failed to install app:",e)}}showUpdatePrompt(){const e=document.getElementById("update-prompt");e&&(e.style.display="block")}hideUpdatePrompt(){const e=document.getElementById("update-prompt");e&&(e.style.display="none")}async handleUpdatePrompt(){try{await this.serviceWorkerManager.updateApp(),this.hideUpdatePrompt()}catch(e){console.error("Failed to update app:",e)}}async testCacheBusting(){console.log("üß™ Testing cache busting...");try{const e=await this.cacheBustingManager.testAllStrategies();console.log("Cache busting test results:",e),this.config.enableNotifications&&this.notificationManager.show("Cache Busting Test","Test completed successfully!")}catch(e){console.error("Cache busting test failed:",e)}}async testOfflineMode(){console.log("üì± Testing offline mode...");const e=navigator.onLine;Object.defineProperty(navigator,"onLine",{writable:!0,value:!1}),window.dispatchEvent(new Event("offline")),this.showOfflineIndicator(),setTimeout(()=>{Object.defineProperty(navigator,"onLine",{writable:!0,value:e}),window.dispatchEvent(new Event("online")),this.hideOfflineIndicator()},3e3)}async testNotifications(){console.log("üîî Testing notifications...");try{await this.notificationManager.show("Test Notification","This is a test notification from the PWA Template!")}catch(e){console.error("Notification test failed:",e)}}handleCacheBustingUpdate(e){console.log("üîÑ Cache busting update detected:",e),this.config.enableNotifications&&this.notificationManager.show("Update Available","New content has been detected and will be loaded.")}handleVisibilityChange(){document.hidden?this.performanceMonitor.pause():(this.performanceMonitor.resume(),this.config.autoUpdateCheck&&this.checkForUpdates())}handleOnlineStatusChange(e){e?(console.log("üåê App is online"),this.hideOfflineIndicator(),this.config.autoUpdateCheck&&this.checkForUpdates()):(console.log("üì± App is offline"),this.showOfflineIndicator())}showOfflineIndicator(){let e=document.getElementById("offline-indicator");e||(e=document.createElement("div"),e.id="offline-indicator",e.style.cssText=`
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        background: #ff9800;
        color: white;
        text-align: center;
        padding: 8px;
        z-index: 1002;
      `,e.textContent="üì± You are offline",document.body.appendChild(e)),e.style.display="block"}hideOfflineIndicator(){const e=document.getElementById("offline-indicator");e&&(e.style.display="none")}updatePerformanceMetrics(e){this.config.debugMode&&console.log("Performance metrics:",e)}async checkForUpdates(){try{await this.serviceWorkerManager.checkForUpdates()}catch(e){console.error("Update check failed:",e)}}handleInitializationError(e){console.error("Initialization error:",e);const t=document.createElement("div");t.style.cssText=`
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #f44336;
      color: white;
      padding: 20px;
      border-radius: 8px;
      z-index: 1000;
      text-align: center;
    `,t.innerHTML=`
      <h3>Initialization Error</h3>
      <p>Failed to initialize the app. Please refresh the page.</p>
      <button onclick="location.reload()" style="
        background: rgba(255,255,255,0.2);
        border: none;
        color: white;
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
        margin-top: 10px;
      ">Refresh Page</button>
    `,document.body.appendChild(t)}}document.addEventListener("DOMContentLoaded",()=>{window.pwaApp=new p});window.PWAApp=p;
